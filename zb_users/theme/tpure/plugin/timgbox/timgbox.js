$(function(){var e,s,n,a,i,t,c;e=$('<div class="image-viewer"></div>'),s=$('<div class="viewer-content"></div>'),n=$('<a class="viewer-btn prev-btn">').append($('<span class="btn-symbol">\u2190</span>')),a=$('<img class="viewer-image" src="" alt="">'),i=$('<a class="viewer-btn next-btn">').append($('<span class="btn-symbol">\u2192</span>')),t=$('<a class="viewer-btn close-btn">').append($('<span class="btn-symbol">\xd7</span>')),c=$('<div class="fullscreen-zoom">').append($('<img class="fullscreen-image" src="" alt="">')),s.append(n,a,i),e.append(s,t),$("body").append(e,c);let l=[],o=0,r=!1;const d=$(".fullscreen-zoom");function g(){var e=l.length;const a=$(l[o]).attr("src"),i=$(".viewer-image"),t=($(".prev-btn, .next-btn").toggle(1<e),i.removeClass("can-zoom").off("click.zoom"),new Image);t.src=a,t.onload=function(){const e=t.width,s=t.height;var n=window.innerHeight;(r=960<e||s>n)?i.addClass("can-zoom").on("click.zoom",function(){m(e,s),$(".fullscreen-image").attr("src",a),d.fadeIn(100).css("display","flex"),$("body").addClass("break")}):r=!1},i.attr("src",a).hide().fadeIn(100)}function m(e,s){var n=d.innerWidth(),a=d.innerHeight();let i,t;(t=n<e?s/e*n:(i=e,s))<=a?d.css({"align-items":"center",padding:0}):d.css({"align-items":"start",padding:"20px 0"})}$(document).on("click",".timgbox img",function(){var e=$(this);0<e.closest("a").length||(l=e.closest(".timgbox").find("img").toArray(),o=l.indexOf(this),g(),$(".image-viewer").fadeIn(100).css("display","flex"),$("body").addClass("break"))}),$(document).on("click",".close-btn",function(){$(".image-viewer").fadeOut(100),d.fadeOut(100),$("body").removeClass("break")}),$(document).on("click",".prev-btn",function(){o=(o-1+l.length)%l.length,g()}),$(".next-btn").click(function(){o=(o+1)%l.length,g()}),$(document).on("click",".image-viewer",function(e){var s=$(e.target).hasClass("viewer-image"),e=0<$(e.target).closest(".viewer-btn").length;s||e||($(this).fadeOut(100),d.fadeOut(100),$("body").removeClass("break"))}),$(document).keydown(function(e){if($(".image-viewer").is(":visible"))switch(e.key){case"ArrowLeft":o=(o-1+l.length)%l.length,g();break;case"ArrowRight":o=(o+1)%l.length,g();break;case"Escape":$(".image-viewer").fadeOut(100),d.fadeOut(100),$("body").removeClass("break")}else d.is(":visible")&&"Escape"===e.key&&(d.fadeOut(300),$("body").removeClass("break"))}),$(window).resize(function(){if(d.is(":visible")){var e=$(".fullscreen-image").attr("src");const s=new Image;s.src=e,s.onload=function(){m(s.width,s.height)}}}),d.on("click",function(e){($(e.target).hasClass("fullscreen-zoom")||$(e.target).hasClass("fullscreen-image"))&&($(this).fadeOut(100),$(".image-viewer").is(":visible")||$("body").removeClass("break"))})});